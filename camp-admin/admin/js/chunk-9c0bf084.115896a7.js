(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c0bf084"],{"165e":function(e,r,t){},"35b0":function(e,r,t){"use strict";t.r(r);var s=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"container"},[t("h3",[e._v("证书管理平台管理系统")]),t("el-form",{ref:"loginForm",attrs:{model:e.userForm,rules:e.rules}},[t("el-form-item",{attrs:{prop:"username"}},[t("el-input",{attrs:{"prefix-icon":"el-icon-user",placeholder:"请输入账号"},model:{value:e.userForm.username,callback:function(r){e.$set(e.userForm,"username","string"===typeof r?r.trim():r)},expression:"userForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{attrs:{type:"password","prefix-icon":"el-icon-user",placeholder:"请输入密码"},model:{value:e.userForm.password,callback:function(r){e.$set(e.userForm,"password","string"===typeof r?r.trim():r)},expression:"userForm.password"}})],1),t("el-form-item",[t("span",{staticClass:"fr cursor",on:{click:function(r){e.forgetFlag=!0}}},[e._v("忘记密码")])]),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loginLoading},on:{click:e.login}},[e._v(e._s(e.buttonText))])],1)],1),e.forgetFlag?t("el-dialog",[t("el-form")],1):e._e()],1)},n=[],o=(t("96cf"),t("1da1")),a=t("0c6d"),i=t("a629"),u={data:function(){var e=function(e,r,t){var s=/^([a-zA-Z0-9]|\_)*$/g;if(!s.test(r))return t(new Error("账号只能由数字、字母和下划线组成")),!1;t()};return{redirect:this.$route.query.redirect,userForm:{username:null,password:null,registerFlag:!1},rules:{username:[{required:!0,message:"请输入用户名",trigger:"change"},{validator:e,trigger:"change"}],password:[{required:!0,message:"请输入6-18位密码",trigger:"change"},{min:6,max:18,message:"密码需要6-18位",trigger:"change"}]},forgetFlag:!1,loginLoading:!1}},methods:{login:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null!=this.userForm.username&&null!=this.userForm.password){e.next=3;break}return this.$message.error("账号或者密码不能为空"),e.abrupt("return",!1);case 3:return r={username:this.userForm.username,password:Object(a["a"])(this.userForm.password)},this.loginLoading=!0,e.prev=5,e.next=8,i["a"].login(r);case 8:t=e.sent,this.$store.commit("setUser",t.data),this.$message.success(t.msg),this.$router.push({path:this.redirect?this.redirect:"/admin"}),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),this.$message.error(e.t0.message);case 17:this.loginLoading=!1;case 18:case"end":return e.stop()}}),e,this,[[5,14]])})));function r(){return e.apply(this,arguments)}return r}()},computed:{buttonText:function(){return this.userForm.registerFlag?"注册":"登陆"}}},c=u,l=(t("f54f"),t("2877")),m=Object(l["a"])(c,s,n,!1,null,"78f8e6a6",null);r["default"]=m.exports},a629:function(e,r,t){"use strict";var s=t("0c6d"),n=t("b441"),o=function(e){return Object(s["c"])("".concat(n["a"],"/login"),"post",e)},a=function(e){return Object(s["c"])("".concat(n["a"],"/logout"),"post",e)},i=function(e){return Object(s["c"])("".concat(n["a"],"/setNewPassword"),"post",e)};r["a"]={login:o,logout:a,resetPassword:i}},f54f:function(e,r,t){"use strict";var s=t("165e"),n=t.n(s);n.a}}]);