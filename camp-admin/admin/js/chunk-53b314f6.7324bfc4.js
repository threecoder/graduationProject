(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53b314f6"],{"05cf":function(t,e,a){},"14eb":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-col",{staticClass:"mt30",attrs:{span:24}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.total,"hide-on-single-page":!0},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},r=[],c={data:function(){return{}},props:["total","pageSize","currentPage"],methods:{handleSizeChange:function(t){},handleCurrentChange:function(t){this.$emit("curChange",t,this.pageSize)}}},i=c,o=(a("a26e"),a("2877")),s=Object(o["a"])(i,n,r,!1,null,"5426d9d5",null);e["a"]=s.exports},"29ce":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22}},[a("h3",[t._v("管理员账号管理")])]),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){t.addDiaFlag=!0}}},[t._v("添加管理员")])],1)],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"form-container"},[a("el-form",{attrs:{model:t.form,inline:""}},[a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{placeholder:"管理员账号",clearable:""},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("el-form-item",{attrs:{label:"名字"}},[a("el-input",{attrs:{placeholder:"管理员名字",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.getAdminList}},[t._v("查询")])],1)],1)],1),a("div",{staticClass:"table-container"},[a("m-table",{attrs:{data:t.table.data,tableConfig:t.table.config,loading:t.table.loading},scopedSlots:t._u([{key:"oper",fn:function(e){var n=e.params;return a("el-table-column",t._b({attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return a("div",{},["否"==n.lock?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.lock(n)}}},[t._v("冻结")]):t._e(),"是"==n.lock?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.unLock(n)}}},[t._v("解冻")]):t._e(),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.authority(n)}}},[t._v("权限")])],1)}}])},"el-table-column",n,!1))}}])})],1),a("div",{staticClass:"page-container"},[a("page",{attrs:{currentPage:t.form.currentPage,total:t.form.total,pageSize:t.form.pageSize},on:{curChange:t.curChange}})],1),t.addDiaFlag?a("el-dialog",{attrs:{title:"添加管理员",visible:t.addDiaFlag},on:{"update:visible":function(e){t.addDiaFlag=e}}},[a("new-admin",{on:{cancel:function(e){t.addDiaFlag=!1,t.getAdminList()}}})],1):t._e(),t.auth.flag?a("el-dialog",{attrs:{title:"修改权限",visible:t.auth.flag},on:{"update:visible":function(e){return t.$set(t.auth,"flag",e)}}},[a("authority",{attrs:{account:t.auth.account},on:{cancel:function(e){t.auth.flag=!1}}})],1):t._e()],1)},r=[],c=(a("96cf"),a("1da1")),i=a("d2a2"),o=a("14eb"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-container"},[a("el-form",{ref:"adminForm",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"新的账号",prop:"account"}},[a("el-input",{attrs:{placeholder:"请输入新的管理员账号"},model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),a("el-form-item",{attrs:{label:"管理员名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入管理员名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("div",{staticClass:"tac"},[a("el-button",{attrs:{size:"medium"},on:{click:t.cancel}},[t._v("取消")]),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.add}},[t._v("添加")])],1)],1)},u=[],l=a("397f"),m={data:function(){return{form:{name:null,account:null},rules:{account:[{required:!0,trigger:"blur",message:"管理员账号必须填"}],name:[{required:!0,trigger:"blur",message:"管理员名称必须填"}]}}},methods:{add:function(){var t=this;this.$refs.adminForm.validate(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=12;break}return e.prev=1,e.next=4,l["a"].addNewAdmin(t.form);case 4:e.sent,t.$message.success("添加成功"),t.cancel(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),t.$message.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())},cancel:function(){this.$emit("cancel")}}},f=m,d=(a("466a"),a("2877")),p=Object(d["a"])(f,s,u,!1,null,"10b986d9",null),g=p.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),a("div",{staticClass:"form-container"},[a("el-transfer",{attrs:{data:t.data,titles:t.titles},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),a("div",{staticClass:"tac"},[a("el-button",{attrs:{size:"small"},on:{click:t.cancel}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.modify}},[t._v("确定")])],1)])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"tip"},[a("span",[t._v("左侧列表项目")]),t._v("为\n        "),a("span",[t._v("不开放的权限")]),t._v("，\n        "),a("span",[t._v("右侧列表项目")]),t._v("则为\n        "),a("span",[t._v("开放权限")]),t._v("，\n        "),a("span",[t._v("移动列表项")]),t._v("修改当前账号权限\n    ")])}],v=(a("8e6e"),a("456d"),a("ac6a"),a("ade3")),y=a("b441");function k(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function O(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?k(Object(a),!0).forEach((function(e){Object(v["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _={props:{account:{type:String,required:!0}},data:function(){return{auList:[],valueObj:{},value:[],data:[],titles:["不开放权限列表","开放权限列表"]}},mounted:function(){this.init(),this.getAuList()},methods:{init:function(){var t=this;this.data=y["b"].map((function(e){var a=O({},e);return a.value=null,a.disabled=!1,t.$set(t.valueObj,e.key,!1),a}))},getAuList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l["a"].getAuthority(this.account);case 3:e=t.sent,this.valueObj=e.data,this.data.forEach((function(t,e){a.valueObj[t.key]&&a.value.push(t.key)})),console.log(this.value),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),this.$message.error(t.t0.message);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}(),cancel:function(){this.$emit("cancel")},modify:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e in this.valueObj)-1!==this.value.indexOf(e)?this.valueObj[e]=!0:this.valueObj[e]=!1;return t.prev=1,a={account:this.account,authority:this.valueObj},t.next=5,l["a"].modifyAuthority(a);case 5:t.sent,this.$message.success("修改当前账号权限成功"),this.cancel(),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),this.$message.error(t.t0.message);case 13:case"end":return t.stop()}}),t,this,[[1,10]])})));function e(){return t.apply(this,arguments)}return e}()}},j=_,w=(a("cfc5"),Object(d["a"])(j,h,b,!1,null,"7174d7d4",null)),x=w.exports,A={components:{mTable:i["a"],page:o["a"],newAdmin:g,authority:x},data:function(){return{form:{name:null,account:null,pageSize:10,currentPage:1,total:10},table:{config:[{prop:"account",label:"账号"},{prop:"name",label:"名称"},{prop:"lock",label:"冻结"},{slot:"oper",label:"操作"}],data:[{account:"111111",name:"模拟管理员",lock:"否"}],loading:!1},addDiaFlag:!1,auth:{flag:!1,account:null}}},mounted:function(){this.getAdminList()},methods:{getAdminList:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.table.loading=!0,t.prev=1,t.next=4,l["a"].getAdminList(this.form);case 4:e=t.sent,this.table.data=e.data.data,this.form.total=e.data.total,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),this.$message.error(t.t0.message);case 12:this.table.loading=!1;case 13:case"end":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),curChange:function(t){this.form.currentPage=t,this.getAdminList()},lock:function(t){var e=this;this.$confirm("确定要将此账号冻结吗？冻结后该账号将无法登录","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].lockAccount(t.account);case 3:a.sent,e.$message.success("冻结成功"),e.getAdminList(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),e.$message.error(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[0,8]])}))))},unLock:function(t){var e=this;this.$confirm("确定要解除冻结吗？解除后该账号将可以正常管理系统","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,l["a"].unLockAccount(t.account);case 3:a.sent,e.$message.success("解除冻结成功"),e.getAdminList(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),e.$message.error(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[0,8]])}))))},authority:function(t){this.auth.account=t.account,this.auth.flag=!0}}},$=A,C=Object(d["a"])($,n,r,!1,null,"524dd24a",null);e["default"]=C.exports},"2cac":function(t,e,a){},"397f":function(t,e,a){"use strict";var n=a("0c6d"),r=a("b441"),c=function(t){return Object(n["c"])("".concat(r["a"],"/getAdminList"),"get",t)},i=function(t){return Object(n["c"])("".concat(r["a"],"/lockAccount"),"post",{account:t})},o=function(t){return Object(n["c"])("".concat(r["a"],"/unLockAccount"),"post",{account:t})},s=function(t){return Object(n["c"])("".concat(r["a"],"/addNewAdmin"),"post",t)},u=function(t){return Object(n["c"])("".concat(r["a"],"/getAuthority"),"get",{account:t})},l=function(t){return Object(n["c"])("".concat(r["a"],"/modifyAuthority"),"post",t)},m=function(){return Object(n["c"])("".concat(r["a"],"/getSystemParams"),"get")},f=function(t){return Object(n["c"])("".concat(r["a"],"/modifySystemParams"),"post",t)};e["a"]={getAdminList:c,lockAccount:i,unLockAccount:o,addNewAdmin:s,getAuthority:u,modifyAuthority:l,getSystemParams:m,modifySystemParams:f}},"466a":function(t,e,a){"use strict";var n=a("05cf"),r=a.n(n);r.a},a26e:function(t,e,a){"use strict";var n=a("a765"),r=a.n(n);r.a},a765:function(t,e,a){},add5:function(t,e,a){"use strict";var n=a("e01e"),r=a.n(n);r.a},cfc5:function(t,e,a){"use strict";var n=a("2cac"),r=a.n(n);r.a},d2a2:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",t._g(t._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tableRef",staticClass:"m-table",attrs:{size:"small",data:t.data,"max-height":t.data?600:200}},"el-table",t.tableAttr,!1),t.tableEvent),[t._l(t.tableConfig,(function(e,n){return[e.slot?t._t(e.slot,null,{params:e,prop:e.prop}):a("el-table-column",t._b({key:n,attrs:{align:"center"}},"el-table-column",e,!1))]}))],2)},r=[],c={name:"m-Table",props:{tableConfig:{type:Array},data:{type:Array},loading:{type:Boolean},tableAttr:{type:Object},tableEvent:{type:Object}}},i=c,o=(a("add5"),a("2877")),s=Object(o["a"])(i,n,r,!1,null,"bcfa35a4",null);e["a"]=s.exports},e01e:function(t,e,a){}}]);