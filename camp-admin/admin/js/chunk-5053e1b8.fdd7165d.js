(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5053e1b8"],{"0ab1":function(e,t,a){"use strict";var r=a("6c25"),n=a.n(r);n.a},"14eb":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"mt30",attrs:{span:24}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.total,"hide-on-single-page":!0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],i={data:function(){return{}},props:["total","pageSize","currentPage"],methods:{handleSizeChange:function(e){},handleCurrentChange:function(e){this.$emit("curChange",e,this.pageSize)}}},s=i,o=(a("a26e"),a("2877")),l=Object(o["a"])(s,r,n,!1,null,"5426d9d5",null);t["a"]=l.exports},"1a8b":function(e,t,a){"use strict";var r=a("0c6d"),n=a("b441"),i=function(e){return Object(r["c"])(n["a"]+"/getQuestionList","get",e)},s=function(){return Object(r["c"])(n["a"]+"/getTrainingList","get")},o=function(e){return Object(r["c"])(n["a"]+"/modifyQuestion","post",e)},l=function(e){return Object(r["c"])(n["a"]+"/addNewExam","post",e)},c=function(e){return Object(r["c"])(n["a"]+"/publishExam","post",{examId:e})},u=function(e){return Object(r["c"])(n["a"]+"/randomFillExam","post",{examId:e})},m=function(e){return Object(r["c"])(n["a"]+"/getNotPostExam","get",{currentPage:e,pageSize:6})},p=function(e){return Object(r["c"])(n["a"]+"/getExamInfo","get",{examId:e})},d=function(e){return Object(r["c"])(n["a"]+"/modifyExamInfo","post",e)},f=function(e){return Object(r["c"])(n["a"]+"/getExamQuestionList","get",{examId:e})},g=function(e){return Object(r["c"])(n["a"]+"/getQuestionInfo","get",{questionId:e})},b=function(e){return Object(r["c"])(n["a"]+"/saveQuestionForExam","post",e)},h=function(){return Object(r["c"])(n["a"]+"/getQuestionTemplate","get",{},"blob")},v=function(e){return Object(r["c"])(n["a"]+"/getPublishedList","get",e)},x=function(e){return Object(r["c"])(n["a"]+"/closeExam","post",{examId:e})},y=function(e){return Object(r["c"])(n["a"]+"/getFinishedStudentList","get",{examId:e})},k=function(e){return Object(r["c"])(n["a"]+"/modifyGrade","post",e)},w=function(){return Object(r["c"])(n["a"]+"/getGradeTemplate","get",{},"blob")},O=function(e){return Object(r["c"])("".concat(n["a"],"/getExamDetail"),"get",e)},j=function(){return Object(r["c"])("".concat(n["a"],"/getCheckerList"),"get")},_=function(e){return Object(r["c"])("".concat(n["a"],"/getGradeList"),"get",{examId:e})},$=function(e){return Object(r["c"])("".concat(n["a"],"/submitGradeList"),"post",e)},I=function(e){return Object(r["c"])("".concat(n["a"],"/getWaitingGradeList"),"get",e)},E=function(e){return Object(r["c"])("".concat(n["a"],"/approvalSingleRecord"),"post",{recordId:e})},R=function(e){return Object(r["c"])("".concat(n["a"],"/approvalManyRecords"),"post",{ids:e})},C=function(e){return Object(r["c"])("".concat(n["a"],"/refuseSingleRecord"),"post",e)},F=function(e){return Object(r["c"])("".concat(n["a"],"/refuseManyRecords"),"post",e)},L=function(e){return Object(r["c"])("".concat(n["a"],"/getCheckRecordList"),"get",e)};t["a"]={getQuestionList:i,getTrainingList:s,modefyQuestionInfo:o,newExam:l,publishExam:c,randomFillExam:u,getNotPostExam:m,getExamInfo:p,modifyExam:d,getExamQuestionList:f,getSingleQuestion:g,saveQuestionForExam:b,getQuestionTemplate:h,getPublishedList:v,closeExam:x,getFinishedStudentList:y,getGradeTemplate:w,getExamDetail:O,getCheckerList:j,getGradeList:_,submitGradeList:$,getWaitingGradeList:I,approvalSingleRecord:E,approvalManyRecords:R,refuseSingleRecord:C,refuseManyRecords:F,getCheckRecordList:L,modifyGrade:k}},2576:function(e,t,a){},"6c25":function(e,t,a){},"7f7f":function(e,t,a){var r=a("86cc").f,n=Function.prototype,i=/^\s*function ([^ (]*)/,s="name";s in n||a("9e1e")&&r(n,s,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},"90a0":function(e,t,a){"use strict";var r=a("ef9e"),n=a.n(r);n.a},"9dac":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,data:e.uploadData,limit:e.limit,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"on-change":e.handleChange,"on-success":e.handleSuccess,"on-error":e.handleError,"file-list":e.fileList,"auto-upload":e.autoUpload},on:{"update:data":function(t){e.uploadData=t}}},[a("el-button",{attrs:{slot:"trigger",type:"success",size:e.size},slot:"trigger"},[e._v("选取文件")]),e.autoUpload?e._e():a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:e.size},on:{click:e.submitUpload}},[e._v("上传文件")]),e.tip?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tip))]):e._e()],1)],1)},n=[],i=(a("7f7f"),a("c5f6"),{props:{uploadUrl:{type:String,default:""},limit:{type:Number,default:1},tip:{type:String,default:""},fileName:{type:String,default:""},autoUpload:{type:Boolean,default:!0},formData:{type:Object,default:function(){}},path:{type:String,default:""},size:{type:String,default:"small"}},data:function(){return{fileList:this.fileName?[{uid:1111,name:this.fileName}]:[],uploadData:null}},watch:{formData:{handler:function(e,t){console.log(e,t),console.log("change"),this.uploadData=this.formData},deep:!0}},methods:{submitUpload:function(){var e=this;this.uploadData=this.formData,setTimeout((function(){e.$refs.upload.submit()}),400)},handleRemove:function(e,t){for(var a=-1,r=0;r<this.fileList.length;r++)if(this.fileList[r].uid==e.uid){a=r;break}this.fileList.splice(a,1),this.hasFile=0!=this.fileList.length,this.$emit("removeFile"),this.$message.info("移除文件 ".concat(e.name))},handleExceed:function(){this.$message.error("最多只能选择".concat(this.limit,"个文件"))},handleSuccess:function(e){this.$emit("uploadSuccess",e),this.path&&this.$router.push({path:this.path})},handleError:function(){this.$emit("removeFile"),this.$message.error("文件上传失败，请选择文件重试")},handleChange:function(){this.$emit("addFile")}}}),s=i,o=a("2877"),l=Object(o["a"])(s,r,n,!1,null,"026f6144",null);t["a"]=l.exports},a26e:function(e,t,a){"use strict";var r=a("a765"),n=a.n(r);n.a},a765:function(e,t,a){},add5:function(e,t,a){"use strict";var r=a("e01e"),n=a.n(r);n.a},d2a2:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableRef",staticClass:"m-table",attrs:{size:"small",data:e.data,"max-height":e.data?600:200}},"el-table",e.tableAttr,!1),e.tableEvent),[e._l(e.tableConfig,(function(t,r){return[t.slot?e._t(t.slot,null,{params:t,prop:t.prop}):a("el-table-column",e._b({key:r,attrs:{align:"center"}},"el-table-column",t,!1))]}))],2)},n=[],i={name:"m-Table",props:{tableConfig:{type:Array},data:{type:Array},loading:{type:Boolean},tableAttr:{type:Object},tableEvent:{type:Object}}},s=i,o=(a("add5"),a("2877")),l=Object(o["a"])(s,r,n,!1,null,"bcfa35a4",null);t["a"]=l.exports},e01e:function(e,t,a){},e759:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"form-container"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"考试名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"考试名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"题目数量",prop:"num"}},[a("el-input",{attrs:{placeholder:"输入大于0的数字"},model:{value:e.ruleForm.num,callback:function(t){e.$set(e.ruleForm,"num",t)},expression:"ruleForm.num"}})],1)],1)],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"考试时长(分钟)",prop:"len","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"以分钟为单位"},model:{value:e.ruleForm.len,callback:function(t){e.$set(e.ruleForm,"len",t)},expression:"ruleForm.len"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"及格分数(百分制)",prop:"pass","label-width":"140px"}},[a("el-input",{attrs:{placeholder:"输入及格分数"},model:{value:e.ruleForm.pass,callback:function(t){e.$set(e.ruleForm,"pass",t)},expression:"ruleForm.pass"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"所属培训",prop:"training","label-width":"140px"}},[a("el-select",{model:{value:e.ruleForm.training,callback:function(t){e.$set(e.ruleForm,"training",t)},expression:"ruleForm.training"}},e._l(e.trainingList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.id,label:e.label}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-form-item",{attrs:{label:"考试开放时间",prop:"dateRange","label-width":"200"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{prop:"dateRange"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange",placeholder:"选择日期","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.dateRange,callback:function(t){e.$set(e.ruleForm,"dateRange",t)},expression:"ruleForm.dateRange"}})],1)],1)],1)],1),a("el-row",[a("el-col",[a("el-form-item",[1==e.type?a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认修改")]),a("el-popover",{staticStyle:{"margin-left":"30px"},attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[a("p",[e._v("重置将清空填写的所有信息，确定重置吗？")]),a("div",[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("确定")])],1),a("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("重置表单")])],1)],1)],1)],1)],1)],1)])},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("1da1")),s=a("ade3"),o=(a("c5f6"),a("bbd5")),l=a("1a8b");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={props:["type","id"],data:function(){var e=function(e,t,a){var r=Number(t);return r!==r?(a(new Error("请输入数字")),!1):r<0?(a(new Error("题目数量不能小于0")),!1):void a()},t=function(e,t,a){var r=Number(t);if(r!==r)return a(new Error("请输入数字")),!1;a()};return{ruleForm:{name:"",num:null,pass:null,len:null,dateRange:null,training:null,openTime:null,closeTime:null},flag:!1,visible:!1,trainingList:[],rules:{name:[{required:!0,message:"请输入考试名称",trigger:"blur"}],num:[{required:!0,message:"请输入考试题目数量",trigger:"blur"},{validator:e,trigger:"blur"}],dateRange:[{required:!0,message:"请选择开放考试时间",trigger:"change"}],len:[{required:!0,message:"请输入考试时长",trigger:"blur"},{validator:t,trigger:"blur"}],pass:[{required:!0,message:"请输入百分制及格分数",trigger:"blur"},{validator:t,trigger:"blur"}],training:[{required:!0,message:"请选择考试所属培训",trigger:"blur"}]}}},mounted:function(){0==this.type&&this.getExam(),this.getTraining()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("请填完所有信息再创建活动"),t.flag=!1,!1;var a=u({},t.ruleForm);a.openTime=Object(o["b"])(a.dateRange[0]),a.closeTime=Object(o["b"])(a.dateRange[1]),t.flag=!0,console.log(a),1==t.type?t.addNewExam(a):t.saveModify(a)}))},resetForm:function(e){this.$refs[e].resetFields(),this.visible=!1,this.$message.success("重置成功！")},addNewExam:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.flag){e.next=12;break}return e.prev=1,e.next=4,l["a"].newExam(t);case 4:e.sent,this.$message.success("新建考试成功"),this.$emit("close"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),saveModify:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.flag){e.next=13;break}return e.prev=1,t.examId=this.id,e.next=5,l["a"].modifyExam(t);case 5:e.sent,this.$message.success("修改考试成功"),this.$emit("close"),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}(),getTraining:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["a"].getTrainingList();case 3:t=e.sent,this.trainingList=t.data,console.log(t),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),getExam:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=this.type){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,l["a"].getExamInfo(this.id);case 5:t=e.sent,this.ruleForm=t.data,a=[],a[0]=new Date(t.data.startTime),a[1]=new Date(t.data.endTime),this.ruleForm.dateRange=a,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),this.$message.error(e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[2,13]])})));function t(){return e.apply(this,arguments)}return t}()}},p=m,d=(a("ff9b"),a("2877")),f=Object(d["a"])(p,r,n,!1,null,"5044d8b7",null);t["a"]=f.exports},ef9e:function(e,t,a){},effc:function(e,t,a){"use strict";var r=a("ffce"),n=a.n(r);n.a},f78a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",[e._v("已发布的考试")]),a("div",{staticClass:"divider"}),a("div",{staticClass:"table-container"},[a("mTable",{attrs:{tableConfig:e.table.config,data:e.table.data,loading:e.table.loading},scopedSlots:e._u([{key:"oper",fn:function(t){var r=t.params;return a("el-table-column",e._b({attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return a("div",{},[2==r.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.modify(r)}}},[e._v("修改信息")]):e._e(),2==r.status||3==r.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.close(r)}}},[e._v("关闭考试")]):e._e(),3==r.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.finishedNumber(r)}}},[e._v("已作答人数")]):e._e(),4==r.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.uploadGrade(r)}}},[e._v("上传成绩单")]):e._e(),4==r.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.beforeSubmit(r)}}},[e._v("提交审核")]):e._e(),4==r.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.checkHistory(r)}}},[e._v("审核记录")]):e._e(),4==r.status||5==r.status?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.finishedNumber(r)}}},[e._v("成绩统计")]):e._e()],1)}}])},"el-table-column",r,!1))}}])}),a("page",{attrs:{currentPage:e.form.currentPage,pageSize:e.form.pageSize,total:e.form.total},on:{curChange:e.curChange}})],1),e.diaInfo.flag?a("el-dialog",{attrs:{visible:e.diaInfo.flag,title:"修改考试信息"},on:{"update:visible":function(t){return e.$set(e.diaInfo,"flag",t)}}},[a("exam-publish",{attrs:{id:e.diaInfo.examId,type:!1},on:{close:function(t){e.diaInfo.flag=!1,e.getPubedList()}}})],1):e._e(),e.diaFini.flag?a("el-dialog",{attrs:{visible:e.diaFini.flag,title:"学生列表（已完成考试）"},on:{"update:visible":function(t){return e.$set(e.diaFini,"flag",t)}}},[a("finish-detail",{attrs:{examInfo:e.diaFini.info}})],1):e._e(),e.diaGrade.flag?a("el-dialog",{attrs:{visible:e.diaGrade.flag,title:"上传成绩单"},on:{"update:visible":function(t){return e.$set(e.diaGrade,"flag",t)}}},[a("h3",{staticClass:"tac"},[e._v("上传成绩单之前请先下载成绩单模板，填写数据后再上传")]),a("div",{staticClass:"tac upload-container"},[a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:e.getGradeTemp}},[e._v("下载成绩单模板")]),a("upload",{attrs:{uploadUrl:e.diaGrade.uploadUrl,autoUpload:!1,formData:e.diaGrade.data,size:"normal"},on:{uploadSuccess:e.success}})],1)]):e._e(),e.submit.flag?a("el-dialog",{attrs:{visible:e.submit.flag,title:"提交成绩给审核员审核"},on:{"update:visible":function(t){return e.$set(e.submit,"flag",t)}}},[a("grade-list",{attrs:{examId:e.submit.examId},on:{submitClose:function(t){e.submit.flag=!1}}})],1):e._e(),e.history.flag?a("el-dialog",{attrs:{visible:e.history.flag,title:"成绩审查记录",width:"60%","close-on-click-modal":!1},on:{"update:visible":function(t){return e.$set(e.history,"flag",t)}}},[a("check-history",{attrs:{examId:e.history.examId}})],1):e._e()],1)},n=[],i=(a("ac6a"),a("96cf"),a("1da1")),s=a("d2a2"),o=a("14eb"),l=a("e759"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-container"},[a("m-table",{attrs:{data:e.tableData,tableConfig:e.tableConfig,loading:e.loading,tableEvent:e.tableEvent,tableAttr:e.tableAttr},scopedSlots:e._u([{key:"select",fn:function(t){var r=t.params;return a("el-table-column",e._b({attrs:{align:"center",type:"selection",width:"55"}},"el-table-column",r,!1))}},{key:"oper",fn:function(t){var r=t.params;return a("el-table-column",e._b({attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return a("div",{},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.modifyGrade(r)}}},[e._v("修改成绩")])],1)}}])},"el-table-column",r,!1))}}])})],1),a("div",{staticClass:"tac mt30"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-select",{attrs:{placeholder:"选择审核员"},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker",t)},expression:"form.checker"}},e._l(e.checkers,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"tac"},[a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交审核")]),a("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)])],1)],1)])},u=[],m=(a("c5f6"),a("1a8b")),p={props:{examId:{type:String|Number,default:""}},components:{mTable:s["a"],page:o["a"]},data:function(){return{tableData:[],tableConfig:[{slot:"select","reserve-selection":!0},{prop:"name",label:"学员姓名"},{prop:"idNum",label:"学员编号"},{prop:"member",label:"所属会员"},{prop:"times",label:"作答次数"},{prop:"grade",label:"分数"},{slot:"oper",label:"操作"}],tableEvent:{"selection-change":this.handleSelectionChange},tableAttr:{"row-key":"id"},loading:!1,form:{selected:[],checker:null,total:100,pageSize:1,currentPage:1},checkers:[]}},mounted:function(){this.getGradeList(),this.getCheckers()},methods:{getGradeList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,m["a"].getGradeList(this.examId);case 4:t=e.sent,this.tableData=t.data,console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 12:this.loading=!1;case 13:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(){return e.apply(this,arguments)}return t}(),getCheckers:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].getCheckerList();case 3:t=e.sent,this.checkers=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),modifyGrade:function(e){var t=this;this.$prompt("请输入修改后的成绩","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"info"}).then(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(r){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=r.value,a.prev=1,i={examId:t.examId,idNum:e.idNum,grade:n},a.next=5,m["a"].modifyGrade(i);case 5:a.sent,t.$message.success("修改成绩成功"),t.getGradeList(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),t.$message.error(a.t0.message);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}())},cancel:function(){this.$emit("submitClose")},submit:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==this.form.selected.length){e.next=3;break}return this.$message.error("请选择要提交的成绩列表"),e.abrupt("return",!1);case 3:if(null!==this.form.checker){e.next=6;break}return this.$message.error("请选择审核员"),e.abrupt("return",!1);case 6:return e.prev=6,t={},t.checker=String(this.form.checker),t.ids=this.form.selected.map((function(e){return e.id})),e.next=12,m["a"].submitGradeList(t);case 12:e.sent,this.$message.success("提交审核成功"),this.getGradeList(),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](6),this.$message.error(e.t0.message);case 20:case"end":return e.stop()}}),e,this,[[6,17]])})));function t(){return e.apply(this,arguments)}return t}(),handleSelectionChange:function(e){this.form.selected=e,console.log(e)},handleCurrentChange:function(e){this.form.currentPage=e,this.getGradeList()}}},d=p,f=(a("0ab1"),a("2877")),g=Object(f["a"])(d,c,u,!1,null,"5f815c48",null),b=g.exports,h=a("9dac"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("p",{staticClass:"tip"},[e._v("\n        当前完成人数为"+e._s(e.num)+",\n        "),"已完成"==e.type?a("span",[e._v("其中及格人数为："+e._s(e.pass)+"，")]):e._e(),e._v("列表如下：\n    ")]),a("m-table",{attrs:{data:e.table.data,tableConfig:e.table.config,loading:e.table.loading},scopedSlots:e._u([{key:"oper",fn:function(t){var r=t.params;return a("el-table-column",e._b({attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return a("div",{},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.checkDetail(r)}}},[e._v("查看")])],1)}}])},"el-table-column",r,!1))}}])})],1)},x=[],y=(a("7f7f"),{props:{examInfo:{require:!0,type:Object}},components:{mTable:s["a"]},data:function(){return{type:"考试中",num:0,pass:1,table:{config:[{prop:"name",label:"学员姓名"},{prop:"idNum",label:"学员编号"},{prop:"member",label:"所属会员"},{prop:"times",label:"作答次数"},{prop:"grade",label:"分数"},{prop:"isInvalid",label:"是否有效"},{slot:"oper",label:"操作"}],data:[],loading:!1}}},mounted:function(){this.type=3==this.examInfo.status?"考试中":"已完成",this.getFinishStudentList()},methods:{getFinishStudentList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.table.loading=!0,e.prev=1,e.next=4,m["a"].getFinishedStudentList(this.examInfo.examId);case 4:t=e.sent,this.table.data=t.data,this.num=t.data.length,a=0,t.data.forEach((function(e){console.log(e),e.grade>=r.examInfo.pass&&a++})),this.pass=a,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 15:this.table.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[1,12]])})));function t(){return e.apply(this,arguments)}return t}(),checkDetail:function(e){console.log(this.examInfo),this.$router.push({path:"/studentExamDetail/".concat(e.name,"/").concat(this.examInfo.examId,"/").concat(e.idNum)})}}}),k=y,w=Object(f["a"])(k,v,x,!1,null,"02b4f74a",null),O=w.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"history-container"},[a("div",{staticClass:"form-container"},[a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"学员名字"}},[a("el-input",{attrs:{placeholder:"输入学员名字",clearable:""},model:{value:e.form.studentName,callback:function(t){e.$set(e.form,"studentName",t)},expression:"form.studentName"}})],1),a("el-form-item",{attrs:{label:"审查员"}},[a("el-input",{attrs:{placeholder:"审查员名字",clearable:""},model:{value:e.form.checker,callback:function(t){e.$set(e.form,"checker",t)},expression:"form.checker"}})],1),a("el-form-item",{attrs:{label:"是否通过"}},[a("el-select",{attrs:{clearable:""},model:{value:e.form.isPass,callback:function(t){e.$set(e.form,"isPass",t)},expression:"form.isPass"}},[a("el-option",{attrs:{value:"0",label:"否"}}),a("el-option",{attrs:{value:"1",label:"是"}})],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:e.getRecordList}},[e._v("搜索")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"table-container"},[a("m-table",{attrs:{data:e.table.data,tableConfig:e.table.config,loading:e.table.loading}})],1),a("div",{staticClass:"page-container"},[a("page",{attrs:{total:e.form.total,currentPage:e.form.currentPage,pageSize:e.form.pageSize},on:{curChange:e.curChange}})],1)])},_=[],$=(a("8e6e"),a("456d"),a("ade3"));function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){Object($["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R={props:{examId:{require:!0,type:String|Number}},components:{mTable:s["a"],page:o["a"]},data:function(){return{form:{pageSize:10,currentPage:1,total:100,checker:null,studentName:null,isPass:null},table:{config:[{prop:"name",label:"学员姓名"},{prop:"idNum",label:"学员ID"},{prop:"member",label:"所属会员"},{prop:"grade",label:"分数"},{prop:"checker",label:"审核人"},{prop:"pass",label:"是否通过"},{prop:"tip",label:"不通过理由"},{prop:"checkTime",label:"审核时间"}],data:[{orderNum:"20191023111733112724",orderType:"学员订单",name:"英语角",businessType:"培训",builder:"张三",buildTime:"2020-02-02 20:20:30",endTime:"2020-03-02 20:20:20",price:"9500",status:"未支付"}],loading:!1}}},mounted:function(){this.getRecordList()},methods:{getRecordList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=E({},this.form),t.examId=this.examId,e.next=5,m["a"].getCheckRecordList(t);case 5:a=e.sent,this.table.data=a.data.data,this.form.total=a.data.total,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),curChange:function(e){this.form.currentPage=e,this.getRecordList()}}},C=R,F=(a("90a0"),Object(f["a"])(C,j,_,!1,null,"197a8810",null)),L=F.exports,S=a("0c6d"),T={components:{mTable:s["a"],page:o["a"],examPublish:l["a"],upload:h["a"],gradeList:b,finishDetail:O,checkHistory:L},data:function(){return{table:{config:[{prop:"examId",label:"考试序号"},{prop:"name",label:"考试名称"},{prop:"belong",label:"所属培训"},{prop:"startTime",label:"开始时间"},{prop:"endTime",label:"结束时间"},{prop:"min",label:"考试时长（分钟）"},{prop:"statusText",label:"状态"},{slot:"oper",label:"操作",fixed:"right",width:"400px"}],data:[{examId:"1",name:"测试考试",belong:"测试培训",startTime:"2019-10-10 15:00:00",endTime:"2019-10-10 15:00:00",min:120,status:4,statusText:"已发布"}],loading:!1},form:{currentPage:1,total:10,pageSize:10},diaInfo:{flag:!1,examId:null},diaFini:{info:{},flag:!1},diaGrade:{flag:!1,examId:null,uploadUrl:"/campback/admin/uploadGradeOfExam",formData:{examId:null}},submit:{flag:!1,examId:null},history:{flag:!1,examId:null}}},mounted:function(){this.getPubedList()},methods:{curChange:function(e){this.form.currentPage=e,this.getPubedList()},getPubedList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.table.loading=!0,e.prev=1,e.next=4,m["a"].getPublishedList(this.form);case 4:t=e.sent,this.form.total=t.data.total,a=this.table.data=t.data.list,a.forEach((function(e,t){2==e.status?a[t].statusText="已发布":3==e.status?a[t].statusText="考试中":4==e.status?a[t].statusText="成绩未审核":5==e.status&&(a[t].statusText="成绩已审核")})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 13:this.table.loading=!1;case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(){return e.apply(this,arguments)}return t}(),close:function(e){var t=this;this.$confirm("确定要关闭考试吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m["a"].closeExam(e.examId);case 3:a.sent,t.$message.success("关闭考试成功"),t.getPubedList(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.$message.error(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))).catch((function(e){}))},modify:function(e){this.diaInfo.examId=e.examId,this.diaInfo.flag=!0},finishedNumber:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.diaFini.info=t,this.diaFini.flag=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),beforeSubmit:function(e){this.submit.examId=e.examId,this.submit.flag=!0},uploadGrade:function(e){this.diaGrade.flag=!0,this.diaGrade.uploadUrl=this.diaGrade.uploadUrl+"?examId="+e.examId},getGradeTemp:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].getGradeTemplate();case 3:t=e.sent,Object(S["b"])(t),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),checkHistory:function(e){this.history.examId=e.examId,this.history.flag=!0},success:function(e){this.$alert(e.msg,"提示",{confirmButtonText:"确定",type:"info"})}}},P=T,G=(a("effc"),Object(f["a"])(P,r,n,!1,null,"68530380",null));t["default"]=G.exports},ff9b:function(e,t,a){"use strict";var r=a("2576"),n=a.n(r);n.a},ffce:function(e,t,a){}}]);