(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-057f615f"],{"14eb":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-col",{staticClass:"mt30",attrs:{span:24}},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.total,"hide-on-single-page":!0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],i={data:function(){return{}},props:["total","pageSize","currentPage"],methods:{handleSizeChange:function(e){},handleCurrentChange:function(e){this.$emit("curChange",e,this.pageSize)}}},c=i,o=(n("a26e"),n("2877")),s=Object(o["a"])(c,a,r,!1,null,"5426d9d5",null);t["a"]=s.exports},2101:function(e,t,n){"use strict";var a=n("49bd"),r=n.n(a);r.a},3795:function(e,t,n){},"49bd":function(e,t,n){},"4b4e":function(e,t,n){"use strict";var a=n("0c6d"),r=n("b441"),i=function(e){return Object(a["c"])("".concat(r["a"],"/addNewTraining"),"post",e)},c=function(e){return Object(a["c"])("".concat(r["a"],"/getPublishedTraining"),"get",e)},o=function(e){return Object(a["c"])("".concat(r["a"],"/modifyTraining"),"post",e)},s=function(e){return Object(a["c"])("".concat(r["a"],"/getEnrolledStudent"),"get",{trainingId:e})},l=function(e){return Object(a["c"])("".concat(r["a"],"/promptMemberEnrollTraining"),"post",e)},u=function(e){return Object(a["c"])("".concat(r["a"],"/promptAllMemberEnrollTraining"),"post",{trainingId:e})},d=function(e){return Object(a["c"])("".concat(r["a"],"/promptStudentEnrollTraining"),"post",e)},p=function(e){return Object(a["c"])("".concat(r["a"],"/promptAllStudentEnrollTraining"),"post",{trainingId:e})},g=function(e){return Object(a["c"])("".concat(r["a"],"/getNotEnrollStudentList"),"get",e)},m=function(e){return Object(a["c"])("".concat(r["a"],"/getEnrolledStudentList"),"get",e)},f=function(e){return Object(a["c"])("".concat(r["a"],"/getTrainingOrderList"),"get",e)},h=function(e){return Object(a["c"])("".concat(r["a"],"/modifyTrainingOrderPrice"),"post",e)};t["a"]={addNewTraining:i,getPublishedTraining:c,modifyTraining:o,getEnrolledStudent:s,promptMemberEnrollTraining:l,promptAllMemberEnrollTraining:u,promptStudentEnrollTraining:d,promptAllStudentEnrollTraining:p,getNotEnrollStudentList:g,getEnrolledStudentList:m,getTrainingOrderList:f,modifyTrainingOrderPrice:h}},"4c82":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:22}},[n("h3",[e._v("设置培训证书")])]),n("el-col",{attrs:{span:2}},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.curModuleFlag=!0}}},[e._v("现有证书")])],1)],1),n("div",{staticClass:"divider"}),n("div",{staticClass:"form-container"},[n("el-form",{attrs:{inline:"",model:e.searchForm}},[n("el-form-item",{attrs:{label:"培训名称"}},[n("el-input",{attrs:{clearable:"",placeholder:"活动名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}})],1),n("el-form-item",{attrs:{label:"开始时间"}},[n("el-date-picker",{attrs:{clearable:"",type:"date",placeholder:"选择开始日期"},model:{value:e.searchForm.startTime,callback:function(t){e.$set(e.searchForm,"startTime",t)},expression:"searchForm.startTime"}})],1),n("el-form-item",{attrs:{label:"结束时间"}},[n("el-date-picker",{attrs:{clearable:"",type:"date",placeholder:"选择结束日期"},model:{value:e.searchForm.endTime,callback:function(t){e.$set(e.searchForm,"endTime",t)},expression:"searchForm.endTime"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.getPublishedTraining}},[e._v("搜索")])],1)],1)],1),n("div",{staticClass:"table-container"},[n("m-table",{attrs:{tableConfig:e.table.config,data:e.table.data,loading:e.table.loading},scopedSlots:e._u([{key:"oper",fn:function(t){var a=t.params;return n("el-table-column",e._b({attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return n("div",{},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.setCer(a)}}},[e._v("修改证书")])],1)}}])},"el-table-column",a,!1))}}])})],1),n("div",{staticClass:"page-container"},[n("page",{attrs:{currentPage:e.searchForm.currentPage,total:e.searchForm.total,pageSize:e.searchForm.pageSize},on:{curChange:e.curChange,"update:currentPage":function(t){return e.$set(e.searchForm,"currentPage",t)},"update:current-page":function(t){return e.$set(e.searchForm,"currentPage",t)}}})],1),e.curModuleFlag?n("el-dialog",{attrs:{visible:e.curModuleFlag,title:"现有模板"},on:{"update:visible":function(t){e.curModuleFlag=t}}},[n("cur-module")],1):e._e(),e.setDia.flag?n("el-dialog",{attrs:{visible:e.setDia.flag,title:"修改证书",width:"30%"},on:{"update:visible":function(t){return e.$set(e.setDia,"flag",t)}}},[n("set-cer",{attrs:{trainingId:e.setDia.trainingId},on:{cancel:function(t){e.setDia.flag=!1}}})],1):e._e()],1)},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("ade3")),c=(n("96cf"),n("1da1")),o=n("14eb"),s=n("d2a2"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"upload-container"},[n("p",[e._v("上传新的证书背景图，建议大小为A4纸大小，背景图名称将以图片名称命名")]),n("input",{staticStyle:{display:"none"},attrs:{id:"file",type:"file",accept:"image/png, image/gif, image/jpeg, image/jpg"},on:{change:e.onFileChange}}),n("el-button",{attrs:{size:"small",type:"success"},on:{click:e.selectFile}},[e._v("选择文件")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.beforeUpload}},[e._v("上传文件")]),n("p",[e._v(e._s(e.file?e.file.name:""))])],1),n("div",{staticClass:"divider"}),n("div",{staticClass:"now-container"},e._l(e.cerList,(function(t,a){return n("div",{key:a,staticClass:"single-container"},[n("el-image",{attrs:{src:t.url,fit:"fit"}}),n("p",[e._v(e._s(t.name))])],1)})),0)])},u=[],d=(n("7f7f"),n("9dac")),p=n("8fcb"),g={components:{upload:d["a"]},data:function(){return{img:null,file:null,cerList:[]}},mounted:function(){this.getTemplateImg()},methods:{getTemplateImg:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p["a"].getCerBackgroundImg();case 3:t=e.sent,this.cerList=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),selectFile:function(){document.getElementById("file").click()},onFileChange:function(e){var t=e.target,n=t.files;if(n[0].size>this.imgSize)return this.$message.error("图片大小不能超过2M"),!1;console.log(n[0]),this.file=n[0];var a=URL.createObjectURL(n[0]),r=new Image;r.src=a,r.name=n[0].name,this.img=r},beforeUpload:function(){var e=this,t=this.img,n=t.width,a=t.height,r=210/297,i=n/a;i>1.25*r||r<.75*r?this.$confirm("当前所选的图片尺寸为".concat(n,"*").concat(a,"可能不太合适，确定要继续吗？"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.upload()})):this.upload()},upload:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=new FormData,t.append("file",this.file),t.append("name",this.file.name),e.next=6,p["a"].uploadCerBackground(t);case 6:e.sent,this.$message.success("上传成功"),this.getTemplateImg(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()}},m=g,f=(n("2101"),n("2877")),h=Object(f["a"])(m,l,u,!1,null,"643a9415",null),b=h.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"tac"},[n("el-select",{attrs:{placeholder:"培训证书模板背景图"},model:{value:e.imgId,callback:function(t){e.imgId=t},expression:"imgId"}},e._l(e.cerList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.imgId}})})),1),n("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"medium"},on:{click:e.modifyCer}},[e._v("设置")])],1)])},y=[],O={props:["trainingId"],data:function(){return{form:{},imgId:null,cerList:[{name:"111",imgId:111},{name:"222",imgId:222}]}},mounted:function(){this.getTemplateImg(),this.getModuleInfo()},methods:{getModuleInfo:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p["a"].getCerInfo(this.trainingId);case 3:t=e.sent,this.imgId=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),getTemplateImg:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p["a"].getCerBackgroundImg();case 3:t=e.sent,this.cerList=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),modifyCer:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t={trainingId:this.trainingId,imgId:this.imgId},e.next=4,p["a"].modifyCerInfo(t);case 4:e.sent,this.$message.success("修改证书信息成功"),this.cancel(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),cancel:function(){this.$emit("cancel")}}},j=O,C=Object(f["a"])(j,v,y,!1,null,null,null),T=C.exports,k=n("bbd5"),_=n("4b4e");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(i["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x={components:{page:o["a"],mTable:s["a"],curModule:b,setCer:T},data:function(){return{searchForm:{name:null,startTime:null,endTime:null,pageSize:10,currentPage:1,total:100},table:{config:[{prop:"id",label:"培训序号"},{prop:"name",label:"培训名称"},{prop:"startTime",label:"开始时间"},{prop:"endTime",label:"结束时间"},{prop:"address",label:"培训地点"},{slot:"oper",label:"操作",fixed:"right",width:"300px"}],data:[{id:1,name:"模拟数据",startTime:"2020-03-05 21:55:00",endTime:"2020-03-05 21:55:00",address:"小谷围街道",fee:100,vipFee:90,level:"困难",phone:"121212",contacts:"联系人",introduction:["第一段","第二段"]}],loading:!1},curModuleFlag:!1,setDia:{flag:!1,trainingId:null}}},mounted:function(){this.getPublishedTraining()},methods:{getPublishedTraining:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=I({},this.searchForm),t.startTime=Object(k["b"])(t.startTime),t.endTime=Object(k["b"])(t.endTime),this.table.loading=!0,e.prev=4,e.next=7,_["a"].getPublishedTraining(t);case 7:n=e.sent,this.table.data=n.data.list,this.searchForm.total=n.data.total,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](4),this.$message.error(e.t0.message);case 15:this.table.loading=!1;case 16:case"end":return e.stop()}}),e,this,[[4,12]])})));function t(){return e.apply(this,arguments)}return t}(),curChange:function(e){this.searchForm.currentPage=e,this.getPublishedTraining()},setCer:function(e){this.setDia.trainingId=e.id,this.setDia.flag=!0}}},F=x,S=(n("52df"),Object(f["a"])(F,a,r,!1,null,"5ab13d7e",null));t["default"]=S.exports},"52df":function(e,t,n){"use strict";var a=n("3795"),r=n.n(a);r.a},"7f7f":function(e,t,n){var a=n("86cc").f,r=Function.prototype,i=/^\s*function ([^ (]*)/,c="name";c in r||n("9e1e")&&a(r,c,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},"8fcb":function(e,t,n){"use strict";var a=n("0c6d"),r=n("b441"),i=function(e){return Object(a["c"])("".concat(r["a"],"/getOperLogList"),"get",e)},c=function(e){return Object(a["c"])("".concat(r["a"],"/passOperLog"),"post",e)},o=function(e){return Object(a["c"])("".concat(r["a"],"/rejectOperLog"),"post",e)},s=function(e){return Object(a["c"])("".concat(r["a"],"/getCerInfo"),"get",{trainingId:e})},l=function(e){return Object(a["c"])("".concat(r["a"],"/modifyCerInfo"),"post",e)},u=function(e){return Object(a["c"])("".concat(r["a"],"/getPassGradeCheckLIst"),"get",e)},d=function(e){return Object(a["c"])("".concat(r["a"],"/grantCer"),"post",e)},p=function(){return Object(a["c"])("".concat(r["a"],"/getCerBackgroundImg"),"get")},g=function(e){return Object(a["c"])("".concat(r["a"],"/uploadCerBackground"),"post",e)};t["a"]={getOperLogList:i,passOperLog:c,rejectOperLog:o,getCerInfo:s,modifyCerInfo:l,getPassGradeCheckLIst:u,grantCer:d,getCerBackgroundImg:p,uploadCerBackground:g}},"9dac":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadUrl,data:e.uploadData,limit:e.limit,"on-exceed":e.handleExceed,"on-remove":e.handleRemove,"on-change":e.handleChange,"on-success":e.handleSuccess,"on-error":e.handleError,"file-list":e.fileList,"auto-upload":e.autoUpload},on:{"update:data":function(t){e.uploadData=t}}},[n("el-button",{attrs:{slot:"trigger",type:"success",size:e.size},slot:"trigger"},[e._v("选取文件")]),e.autoUpload?e._e():n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:e.size},on:{click:e.submitUpload}},[e._v("上传文件")]),e.tip?n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.tip))]):e._e()],1)],1)},r=[],i=(n("7f7f"),n("c5f6"),{props:{uploadUrl:{type:String,default:""},limit:{type:Number,default:1},tip:{type:String,default:""},fileName:{type:String,default:""},autoUpload:{type:Boolean,default:!0},formData:{type:Object,default:function(){}},path:{type:String,default:""},size:{type:String,default:"small"}},data:function(){return{fileList:this.fileName?[{uid:1111,name:this.fileName}]:[],uploadData:null}},watch:{formData:{handler:function(e,t){console.log(e,t),console.log("change"),this.uploadData=this.formData},deep:!0}},methods:{submitUpload:function(){var e=this;this.uploadData=this.formData,setTimeout((function(){e.$refs.upload.submit()}),400)},handleRemove:function(e,t){for(var n=-1,a=0;a<this.fileList.length;a++)if(this.fileList[a].uid==e.uid){n=a;break}this.fileList.splice(n,1),this.hasFile=0!=this.fileList.length,this.$emit("removeFile"),this.$message.info("移除文件 ".concat(e.name))},handleExceed:function(){this.$message.error("最多只能选择".concat(this.limit,"个文件"))},handleSuccess:function(e){this.$emit("uploadSuccess",e),this.path&&this.$router.push({path:this.path})},handleError:function(){this.$emit("removeFile"),this.$message.error("文件上传失败，请选择文件重试")},handleChange:function(){this.$emit("addFile")}}}),c=i,o=n("2877"),s=Object(o["a"])(c,a,r,!1,null,"026f6144",null);t["a"]=s.exports},a26e:function(e,t,n){"use strict";var a=n("a765"),r=n.n(a);r.a},a765:function(e,t,n){},add5:function(e,t,n){"use strict";var a=n("e01e"),r=n.n(a);r.a},d2a2:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableRef",staticClass:"m-table",attrs:{size:"small",data:e.data,"max-height":e.data?600:200}},"el-table",e.tableAttr,!1),e.tableEvent),[e._l(e.tableConfig,(function(t,a){return[t.slot?e._t(t.slot,null,{params:t,prop:t.prop}):n("el-table-column",e._b({key:a,attrs:{align:"center"}},"el-table-column",t,!1))]}))],2)},r=[],i={name:"m-Table",props:{tableConfig:{type:Array},data:{type:Array},loading:{type:Boolean},tableAttr:{type:Object},tableEvent:{type:Object}}},c=i,o=(n("add5"),n("2877")),s=Object(o["a"])(c,a,r,!1,null,"bcfa35a4",null);t["a"]=s.exports},e01e:function(e,t,n){}}]);