(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1572a28"],{"0db6":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:20}},[a("h3",[e._v("公告管理")])]),a("el-col",{attrs:{span:4}},[a("el-button",{staticClass:"fr",attrs:{size:"medium",type:"primary"},on:{click:e.publish}},[e._v("发布")])],1)],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"form-container"},[a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{attrs:{placeholder:"公告标题",clearable:""},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"发布日期"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"公告发布时间",clearable:""},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.getList}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"table-container"},[a("m-table",{attrs:{data:e.table.data,tableConfig:e.table.config,loading:e.table.loading},scopedSlots:e._u([{key:"oper",fn:function(t){var n=t.params;return a("el-table-column",e._b({attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return a("div",{},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.modify(n)}}},[e._v("修改")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteNotice(n)}}},[e._v("删除")])],1)}}])},"el-table-column",n,!1))}}])})],1),a("div",{staticClass:"page-container"},[a("page",{attrs:{currentPage:e.form.currentPage,total:e.form.total,pageSize:e.form.pageSize},on:{curChange:e.curChange}})],1),e.dia.flag?a("el-dialog",{attrs:{title:e.dia.title,visible:e.dia.flag,"close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":e.beforeClose},on:{"update:visible":function(t){return e.$set(e.dia,"flag",t)}}},[a("notice-edit",{attrs:{noticeId:e.dia.noticeId},on:{cancel:e.beforeClose,refresh:function(t){e.getList(),e.dia.flag=!1}}})],1):e._e()],1)},r=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=(a("96cf"),a("1da1")),l=a("d2a2"),s=a("14eb"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"all-container"},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"title-container"},[a("label",[e._v("标题")]),a("el-input",{attrs:{placeholder:"请输入标题"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)])],1),a("div",{staticClass:"desc-container"},[a("label",[e._v("简要内容")]),a("el-input",{attrs:{type:"textarea",maxlength:50,"show-word-limit":"",placeholder:"请输入简要内容"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),a("div",{staticClass:"edit-container"},[a("label",[e._v("内容")]),a("editor",{attrs:{imgFlag:!1,content:e.initContent},on:{contentChange:e.saveContent}})],1),a("div",{staticClass:"tac"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)])},u=[],d=a("a897"),p=a("95c8"),f={props:{noticeId:String},components:{editor:d["a"]},data:function(){return{form:{title:null,desc:null,content:null},loading:!1,initContent:null}},mounted:function(){this.noticeId&&this.getNoticeDetail()},methods:{saveContent:function(e){this.form.content="<p><br></p>"==e?null:e},cancel:function(){this.$emit("cancel")},submit:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.form,console.log(this.form),t.title&&t.desc&&t.content){e.next=5;break}return this.$message.error("必须填写所有内容"),e.abrupt("return",!1);case 5:if(this.loading=!0,e.prev=6,!this.noticeId){e.next=13;break}return t.noticeId=this.noticeId,e.next=11,p["a"].modifyNotice(t);case 11:e.next=15;break;case 13:return e.next=15,p["a"].addNotice(t);case 15:this.$message.success("编辑公告成功"),this.$emit("refresh"),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](6),this.$message.error(e.t0.message);case 22:this.loading=!1;case 23:case"end":return e.stop()}}),e,this,[[6,19]])})));function t(){return e.apply(this,arguments)}return t}(),getNoticeDetail:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,p["a"].getNoticeDetail(this.noticeId);case 4:t=e.sent,this.form=t.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 11:this.loading=!1;case 12:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}()}},m=f,g=(a("38e5"),a("2877")),b=Object(g["a"])(m,c,u,!1,null,"61d27d96",null),h=b.exports,v=a("bbd5");function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach((function(t){Object(i["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={components:{mTable:l["a"],page:s["a"],noticeEdit:h},data:function(){return{form:{pageSize:10,currentPage:1,total:100,title:null,date:null},table:{config:[{prop:"id",label:"序号"},{prop:"title",label:"标题"},{prop:"desc",label:"简述"},{prop:"time",label:"发布时间"},{slot:"oper",label:"操作",fixed:"right",width:"170px"}],data:[{id:"111",title:"深交所严密监控可转债交易 反复警示交易风险",type:"新闻",desc:"d深交所严密监控可转债交易 反复警示交易风险",time:"2020-02-02 12:00"}],loading:!1},dia:{title:null,flag:!1,noticeId:null}}},mounted:function(){this.getList()},methods:{curChange:function(e){this.form.currentPage=e,this.getList()},getList:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.table.loading=!0,e.prev=1,t=x({},this.form),t.date=Object(v["b"])(t.date),e.next=6,p["a"].getNoticeList(t);case 6:a=e.sent,this.table.data=a.data.list,this.form.total=a.data.total,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 14:this.table.loading=!1;case 15:case"end":return e.stop()}}),e,this,[[1,11]])})));function t(){return e.apply(this,arguments)}return t}(),publish:function(){this.dia.noticeId=null,this.dia.title="发布公告",this.dia.flag=!0},modify:function(e){this.dia.noticeId=e.id,this.dia.title="修改公告",this.dia.flag=!0},deleteNotice:function(e){var t=this;this.$confirm("确定要删除此条数据吗？将无法恢复","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.table.loading=!0,a.prev=1,a.next=4,p["a"].deleteNotice(e.id);case 4:a.sent,t.$message.success("删除该记录成功"),t.getList(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),t.$message.error(a.t0.message);case 12:t.table.loading=!1;case 13:case"end":return a.stop()}}),a,null,[[1,9]])}))))},beforeClose:function(e){var t=this;this.$confirm("确定离开吗？请确保已经保存编辑内容","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then((function(){e?e(!0):t.dia.flag=!1}))}}},C=w,k=Object(g["a"])(C,n,r,!1,null,"40658368",null);t["default"]=k.exports},"14eb":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"mt30",attrs:{span:24}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.total,"hide-on-single-page":!0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},r=[],i={data:function(){return{}},props:["total","pageSize","currentPage"],methods:{handleSizeChange:function(e){},handleCurrentChange:function(e){this.$emit("curChange",e,this.pageSize)}}},o=i,l=(a("a26e"),a("2877")),s=Object(l["a"])(o,n,r,!1,null,"5426d9d5",null);t["a"]=s.exports},"38e5":function(e,t,a){"use strict";var n=a("749e"),r=a.n(n);r.a},"749e":function(e,t,a){},a26e:function(e,t,a){"use strict";var n=a("a765"),r=a.n(n);r.a},a765:function(e,t,a){},add5:function(e,t,a){"use strict";var n=a("e01e"),r=a.n(n);r.a},d2a2:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableRef",staticClass:"m-table",attrs:{size:"small",data:e.data,"max-height":e.data?600:200}},"el-table",e.tableAttr,!1),e.tableEvent),[e._l(e.tableConfig,(function(t,n){return[t.slot?e._t(t.slot,null,{params:t,prop:t.prop}):a("el-table-column",e._b({key:n,attrs:{align:"center"}},"el-table-column",t,!1))]}))],2)},r=[],i={name:"m-Table",props:{tableConfig:{type:Array},data:{type:Array},loading:{type:Boolean},tableAttr:{type:Object},tableEvent:{type:Object}}},o=i,l=(a("add5"),a("2877")),s=Object(l["a"])(o,n,r,!1,null,"bcfa35a4",null);t["a"]=s.exports},e01e:function(e,t,a){}}]);