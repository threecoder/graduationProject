(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23c0d830"],{9037:function(e,t,r){"use strict";var a=r("0c6d"),l=r("b441"),o=function(e){return Object(a["c"])(l["a"]+"/addNewActivity","post",e)},n=function(){return Object(a["c"])(l["a"]+"/getActivityList","get")},s=function(e){return Object(a["c"])(l["a"]+"/getActivitySEAT","get",{activityId:e})},i=function(e){return Object(a["c"])(l["a"]+"/getEntryForm","get",{activityId:e},"blob")},c=function(){return Object(a["c"])(l["a"]+"/getSEATForm","get",{},"blob")},u=function(e){return Object(a["c"])(l["a"]+"/setSEATInfo","post",e)},m=function(e){return Object(a["c"])(l["a"]+"/autoSEAT","post",{activityId:e})};t["a"]={newActivity:o,getActivityList:n,getSEATInfo:s,getEntryForm:i,getSEATForm:c,setSEATInfo:u,autoSEAT:m}},"94d9":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h3",[e._v("新建活动")]),r("div",{staticClass:"divider"}),r("div",{staticClass:"form-container"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-row",{attrs:{gutter:40}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"活动名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"活动名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"活动价格",prop:"fee"}},[r("el-input",{attrs:{placeholder:"输入大于0的数字"},model:{value:e.ruleForm.fee,callback:function(t){e.$set(e.ruleForm,"fee",t)},expression:"ruleForm.fee"}})],1)],1)],1),r("el-row",{attrs:{gutter:40}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"活动地址",prop:"address"}},[r("el-input",{attrs:{placeholder:"请输入活动地址"},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:6}},[r("el-form-item",{attrs:{label:"联系人",prop:"contacts"}},[r("el-input",{attrs:{placeholder:"请输入联系人"},model:{value:e.ruleForm.contacts,callback:function(t){e.$set(e.ruleForm,"contacts",t)},expression:"ruleForm.contacts"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"电话号码",prop:"phone"}},[r("el-input",{attrs:{placeholder:"请输入联系人号码"},model:{value:e.ruleForm.phone,callback:function(t){e.$set(e.ruleForm,"phone",t)},expression:"ruleForm.phone"}})],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-form-item",{attrs:{label:"活动时间",required:""}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"date"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{prop:"time"}},[r("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:e.ruleForm.time,callback:function(t){e.$set(e.ruleForm,"time",t)},expression:"ruleForm.time"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"活动时长",prop:"len"}},[r("el-select",{model:{value:e.ruleForm.len,callback:function(t){e.$set(e.ruleForm,"len",t)},expression:"ruleForm.len"}},[r("el-option",{attrs:{label:"1小时",value:"1"}}),r("el-option",{attrs:{label:"2小时",value:"2"}}),r("el-option",{attrs:{label:"3小时",value:"3"}}),r("el-option",{attrs:{label:"4小时",value:"4"}}),r("el-option",{attrs:{label:"5小时",value:"5"}}),r("el-option",{attrs:{label:"6小时",value:"6"}}),r("el-option",{attrs:{label:"7小时",value:"7"}}),r("el-option",{attrs:{label:"8小时",value:"8"}}),r("el-option",{attrs:{label:"8小时以上",value:"morethan8"}})],1)],1)],1)],1)],1),r("el-row",{attrs:{gutter:20}},[r("el-form-item",{attrs:{label:"活动开放时间",prop:"dateRange","label-width":"200"}},[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{prop:"openTime"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetimerange",placeholder:"选择日期","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.ruleForm.dateRange,callback:function(t){e.$set(e.ruleForm,"dateRange",t)},expression:"ruleForm.dateRange"}})],1)],1)],1)],1),r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"活动简介",prop:"desc"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入活动简介，段落可用回车符隔开"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1)],1)],1),r("el-row",[r("el-col",[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("立即创建")]),r("el-popover",{staticStyle:{"margin-left":"30px"},attrs:{placement:"top",width:"160"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("p",[e._v("重置将清空填写的所有信息，确定重置吗？")]),r("div",{staticStyle:{"text-align":"right",margin:"0"}},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.visible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("确定")])],1),r("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("重置表单")])],1)],1)],1)],1)],1)],1)])},l=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("96cf"),r("1da1")),n=(r("28a5"),r("ade3")),s=(r("c5f6"),r("bbd5")),i=r("9037");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){Object(n["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m={data:function(){var e,t=function(e,t,r){var a=Number(t);return a!==a?(r(new Error("请输入数字")),!1):a<0?(r(new Error("活动价格不能小于0")),!1):void r()},r=function(e,t,r){var a=Number(t);if(a!==a)return r(new Error("请输入数字")),!1;r()};return{ruleForm:{name:"",fee:null,address:"",date:"",time:"",len:null,contacts:null,phone:null,dateRange:null,openTime:null,closeTime:null,desc:""},par:null,flag:!1,visible:!1,rules:(e={name:[{required:!0,message:"请输入活动名称",trigger:"blur"}],fee:[{required:!0,message:"请输入活动价格",trigger:"blur"},{validator:t,trigger:"blur"}],address:[{required:!0,message:"请输入活动地址",trigger:"change"}],contacts:[{required:!0,message:"请输入活动联系人",trigger:"change"}],phone:[{required:!0,message:"请输入联系人电话号码",trigger:"blur"},{validator:r,trigger:"blur"}],date:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],time:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],dateRange:[{type:"date",required:!0,message:"请选择开放报名时间",trigger:"change"}],len:[{required:!0,message:"请选择活动时长",trigger:"blur"}]},Object(n["a"])(e,"dateRange",[{required:!0,message:"请选择活动开放范围",trigger:"blur"}]),Object(n["a"])(e,"desc",[{required:!0,message:"请填写活动形式",trigger:"blur"}]),e)}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$message.error("请填完所有信息再创建活动"),t.flag=!1,!1;var r=u({},t.ruleForm);r.date="".concat(Object(s["a"])(r.date)," ").concat(Object(s["c"])(r.time)),r.openTime=Object(s["b"])(r.dateRange[0]),r.closeTime=Object(s["b"])(r.dateRange[1]),r.desc=r.desc.split("\n"),console.log(r),t.par=r,t.flag=!0,t.addNewActivity(r)}))},addNewActivity:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.flag){e.next=12;break}return e.prev=1,e.next=4,i["a"].newActivity(t);case 4:e.sent,this.$message.success("新建活动成功"),this.$router.push("/activitiesList"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}(),resetForm:function(e){this.$refs[e].resetFields(),this.visible=!1,this.$message.success("重置成功！")}}},p=m,d=(r("b6ed"),r("2877")),b=Object(d["a"])(p,a,l,!1,null,"93160606",null);t["default"]=b.exports},b6ed:function(e,t,r){"use strict";var a=r("d716"),l=r.n(a);l.a},d716:function(e,t,r){}}]);