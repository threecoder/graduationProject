(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50c16950"],{"14eb":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-col",{staticClass:"mt30",attrs:{span:24}},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.currentPage,"page-size":e.pageSize,total:e.total,"hide-on-single-page":!0},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],i={data:function(){return{}},props:["total","pageSize","currentPage"],methods:{handleSizeChange:function(e){},handleCurrentChange:function(e){this.$emit("curChange",e,this.pageSize)}}},l=i,o=(a("a26e"),a("2877")),s=Object(o["a"])(l,r,n,!1,null,"5426d9d5",null);t["a"]=s.exports},a26e:function(e,t,a){"use strict";var r=a("a765"),n=a.n(r);n.a},a765:function(e,t,a){},add5:function(e,t,a){"use strict";var r=a("e01e"),n=a.n(r);n.a},d2a2:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._g(e._b({directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableRef",staticClass:"m-table",attrs:{size:"small",data:e.data,"max-height":e.data?600:200}},"el-table",e.tableAttr,!1),e.tableEvent),[e._l(e.tableConfig,(function(t,r){return[t.slot?e._t(t.slot,null,{params:t,prop:t.prop}):a("el-table-column",e._b({key:r,attrs:{align:"center"}},"el-table-column",t,!1))]}))],2)},n=[],i={name:"m-Table",props:{tableConfig:{type:Array},data:{type:Array},loading:{type:Boolean},tableAttr:{type:Object},tableEvent:{type:Object}}},l=i,o=(a("add5"),a("2877")),s=Object(o["a"])(l,r,n,!1,null,"bcfa35a4",null);t["a"]=s.exports},dbed:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("订单管理")]),a("div",{staticClass:"divider"}),a("div",{staticClass:"form-item"},[a("el-form",{attrs:{model:e.form,inline:""}},[a("el-form-item",{attrs:{label:"订单号"}},[a("el-input",{attrs:{placeholder:"订单号",clearable:""},model:{value:e.form.orderNum,callback:function(t){e.$set(e.form,"orderNum",t)},expression:"form.orderNum"}})],1),a("el-form-item",{attrs:{label:"订单类别"}},[a("el-select",{attrs:{placeholder:"订单类别"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.orderTypeList,(function(e,t){return a("el-option",{key:t,attrs:{value:e.key,label:e.label}})})),1)],1),a("el-form-item",{attrs:{label:"关联名称"}},[a("el-input",{attrs:{placeholder:"订单所属的培训/活动/证书等名称",clearable:""},model:{value:e.form.businessName,callback:function(t){e.$set(e.form,"businessName",t)},expression:"form.businessName"}})],1),a("el-form-item",{attrs:{label:"下单人/单位"}},[a("el-input",{attrs:{placeholder:"下单人/单位",clearable:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.table.loading},on:{click:e.getOrderList}},[e._v("搜索")])],1)],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"table-container"},[a("m-table",{attrs:{data:e.table.data,tableConfig:e.table.config,loading:e.table.loading},scopedSlots:e._u([{key:"oper",fn:function(t){var r=t.params;return a("el-table-column",e._b({attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return a("div",{},["未支付"==r.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.modify(r)}}},[e._v("修改金额")]):e._e(),"未支付"==r.status?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.confirmPay(r)}}},[e._v("确认支付")]):e._e()],1)}}])},"el-table-column",r,!1))}}])})],1),a("div",{staticClass:"page-container"},[a("page",{attrs:{total:e.form.total,currentPage:e.form.currentPage,pageSize:e.form.pageSize},on:{curChange:e.curChange}})],1),e.payment.flag?a("el-dialog",{attrs:{title:"订单支付",visible:e.payment.flag},on:{"update:visible":function(t){return e.$set(e.payment,"flag",t)}}},[a("payment",{attrs:{orderId:e.payment.orderId}})],1):e._e()],1)},n=[],i=(a("c5f6"),a("ac6a"),a("96cf"),a("1da1")),l=a("d2a2"),o=a("14eb"),s=a("0c6d"),c=a("b441"),u=function(e){return Object(s["c"])("".concat(c["a"],"/getOrderList"),"get",e)},p=function(e){return Object(s["c"])("".concat(c["a"],"/modifyOrderPrice"),"post",e)},d=function(e){return Object(s["c"])("".concat(c["a"],"/confirmPay"),"post",{orderNum:e})},m={getOrderList:u,modifyOrderPrice:p,confirmPay:d},f={components:{mTable:l["a"],page:o["a"]},data:function(){return{form:{pageSize:10,currentPage:1,total:100,businessName:null,name:null,orderNum:null,type:"activity"},table:{config:[{prop:"orderNum",label:"订单号"},{prop:"orderType",label:"订单类型"},{prop:"businessName",label:"关联名称"},{prop:"builder",label:"下单人"},{prop:"buildTime",label:"创建时间"},{prop:"startTime",label:"生效时间"},{prop:"endTime",label:"失效时间"},{prop:"status",label:"状态"},{prop:"price",label:"订单金额"},{slot:"oper",label:"操作",fixed:"right",width:"220px"}],data:[{orderNum:"20191023111733112724",orderType:"学员订单",type:"新闻",businessName:"英语角",businessType:"培训",builder:"张三",buildTime:"2020-02-02 20:20:30",endTime:"2020-03-02 20:20:20",price:"9500",status:"未支付"}],loading:!1},payment:{flag:!1,orderId:null},orderTypeList:c["e"]}},mounted:function(){this.getOrderList()},methods:{curChange:function(e){this.form.currentPage=e,this.getOrderList()},getOrderList:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.table.loading=!0,e.prev=1,e.next=4,m.getOrderList(this.form);case 4:t=e.sent,this.table.data=t.data.list,this.form.total=t.data.total,a="活动",r=0;case 9:if(!(r<this.orderTypeList.length)){e.next=16;break}if(this.orderTypeList[r].key!=this.form.type){e.next=13;break}return a=this.orderTypeList[r].label,e.abrupt("break",16);case 13:r++,e.next=9;break;case 16:this.table.data.forEach((function(e){e.orderType=a})),e.next=22;break;case 19:e.prev=19,e.t0=e["catch"](1),this.$message.error(e.t0.message);case 22:this.table.loading=!1;case 23:case"end":return e.stop()}}),e,this,[[1,19]])})));function t(){return e.apply(this,arguments)}return t}(),modify:function(e){var t=this;this.$prompt("请输入新的订单金额","提示",{type:"warning",cancelButtonText:"取消",confirmButtonText:"确定",inputPattern:/^[1-9]\d*$|^\d+(\.\d+)?$/,inputErrorMessage:"请输入正确的金额"}).then(function(){var a=Object(i["a"])(regeneratorRuntime.mark((function a(r){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=r.value,a.prev=1,i={orderNum:e.orderNum,price:Number(n)},a.next=5,m.modifyOrderPrice(i);case 5:a.sent,t.$message.success("修改订单金额成功"),t.getOrderList(),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),t.$message.error(a.t0.message);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}())},confirmPay:function(e){var t=this;this.$confirm("确定将订单状态修改为已支付吗？将无法恢复","提示",{type:"warning",cancelButtonText:"取消",confirmButtonText:"确定"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,m.confirmPay(e.orderNum);case 3:a.sent,t.$message.success("修改订单状态为已支付"),t.getOrderList(),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](0),t.$message.error(a.t0.message);case 11:case"end":return a.stop()}}),a,null,[[0,8]])}))))}}},b=f,g=a("2877"),h=Object(g["a"])(b,r,n,!1,null,"412f55da",null);t["default"]=h.exports},e01e:function(e,t,a){}}]);