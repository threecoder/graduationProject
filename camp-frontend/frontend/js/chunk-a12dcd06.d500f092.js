(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a12dcd06"],{"1e61":function(e,t,n){"use strict";var s=n("8d55"),i=n.n(s);i.a},5252:function(e,t,n){"use strict";var s=n("0c6d"),i=n("b441"),a=function(e){return 0==e?Object(s["c"])("".concat(i["g"],"/getUnReadMsgNum"),"get"):Object(s["c"])("".concat(i["d"],"/getUnReadMsgNum"),"get")},r=function(e,t){return 0==e?Object(s["c"])("".concat(i["g"],"/getMsgList"),"get",t):Object(s["c"])("".concat(i["d"],"/getMsgList"),"get",t)},o=function(e,t){return 0==e?Object(s["c"])("".concat(i["g"],"/getMsgDetail"),"get",{msgID:t}):Object(s["c"])("".concat(i["d"],"/getMsgDetail"),"get",{msgID:t})},c=function(e,t){return 0==e?Object(s["c"])("".concat(i["g"],"/signAsRead"),"post",{msgID:t}):Object(s["c"])("".concat(i["d"],"/signAsRead"),"post",{msgID:t})},l=function(e,t){return 0==e?Object(s["c"])("".concat(i["g"],"/deleteMsg"),"post",{msgID:t}):Object(s["c"])("".concat(i["d"],"/deleteMsg"),"post",{msgID:t})};t["a"]={getUnReadMsgNum:a,getMsgList:r,getMsgDetail:o,signAsRead:c,deleteMsg:l}},"73c6":function(e,t,n){},"8d55":function(e,t,n){},a0b5:function(e,t,n){"use strict";var s=n("0c6d"),i=n("b441"),a=function(e){return Object(s["c"])(i["g"]+"/setUserInfo","post",e)},r=function(e){return Object(s["c"])(i["d"]+"/setUserInfo","post",e)},o=function(){return Object(s["c"])(i["g"]+"/getUserInfo","get")},c=function(){return Object(s["c"])(i["d"]+"/getUserInfo","get")},l=function(e){return Object(s["c"])(i["g"]+"/setNewPassword","post",e)},d=function(e){return Object(s["c"])(i["d"]+"/setNewPassword","post",e)},u=function(e,t){return 0==e?l(t):d(t)},m=function(){return Object(s["c"])("".concat(i["d"],"/rechargeVIP"),"post")};t["a"]={setStudentInfo:a,setMemberInfo:r,getStudentInfo:o,getMemberInfo:c,setStudentPassword:l,setMemberPassword:d,setPassword:u,rechargeVIP:m}},db62:function(e,t,n){"use strict";var s=n("73c6"),i=n.n(s);i.a},ff23:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",{staticClass:"allContainer"},[n("el-col",{staticClass:"header",attrs:{span:24}},[n("div",{staticStyle:{"margin-left":"250px",width:"100%"}},[n("h3",{staticClass:"cursor",on:{click:e.toHomePage}},[e._v("协会首页")]),n("div",{staticClass:"infoContainer fr"},[n("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                            "+e._s(e.name)+"\n                            "),n("span",[n("i",{staticClass:"el-icon-message-solid"}),e._v("\n                                ("+e._s(e.unReadNum)+")\n                            ")]),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"msg"}},[n("span",{staticClass:"message"},[n("i",{staticClass:"el-icon-message-solid"}),e._v("\n                                    我的消息("+e._s(e.unReadNum)+")\n                                ")])]),n("el-dropdown-item",{attrs:{command:"pas"}},[n("span",[n("i",{staticClass:"el-icon-message-solid"}),e._v("\n                                    修改密码\n                                ")])]),n("el-dropdown-item",{attrs:{command:"logout"}},[n("span",{staticClass:"cursor"},[n("i",{staticClass:"el-icon-close"}),e._v("\n                                    退出登录\n                                ")])])],1)],1)],1)])]),n("el-col",{staticClass:"mainContainer",attrs:{span:24}},[n("aside",[n("el-menu",{attrs:{mode:"vertical","default-active":e.defaulUrl,router:!0,"unique-opened":!0,"text-color":"#fff"}},[1==e.type?n("navmenu",{attrs:{data:e.memberList}}):e._e(),0==e.type?n("navmenu",{attrs:{data:e.studentList}}):e._e()],1)],1),n("section",{staticClass:"content-container"},[n("el-row",[n("el-col",{attrs:{span:24}},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[n("router-view",{key:e.$route.path})],1)],1)],1)],1)])],1),e.dialogFlag?n("el-dialog",{attrs:{title:"修改密码",visible:e.dialogFlag,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFlag=t}}},[n("modify-pass",{on:{hide:function(t){e.dialogFlag=!1}}})],1):e._e()],1)},i=[],a=(n("c5f6"),n("96cf"),n("3b8d")),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.data,(function(t,s){return[t.children?e._e():n("el-menu-item",{key:s,attrs:{index:t.index}},[e._v(e._s(t.title))]),t.children?n("el-submenu",{key:s,attrs:{index:t.index}},[n("template",{slot:"title"},[e._v(e._s(t.title))]),n("navmenu",{attrs:{data:t.children}})],2):e._e()]}))],2)},o=[],c={name:"navmenu",props:["data"]},l=c,d=(n("1e61"),n("2877")),u=Object(d["a"])(l,r,o,!1,null,"f5764bfe",null),m=u.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-form",{ref:"modifyPassForm",attrs:{model:e.modifyPass,rules:e.rules}},[n("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[n("el-input",{attrs:{type:"password"},model:{value:e.modifyPass.oldPassword,callback:function(t){e.$set(e.modifyPass,"oldPassword",t)},expression:"modifyPass.oldPassword"}})],1),n("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[n("el-input",{attrs:{type:"password"},model:{value:e.modifyPass.newPassword,callback:function(t){e.$set(e.modifyPass,"newPassword",t)},expression:"modifyPass.newPassword"}})],1),n("el-form-item",{attrs:{label:"再次确认",prop:"newPassword2"}},[n("el-input",{attrs:{type:"password"},model:{value:e.modifyPass.newPassword2,callback:function(t){e.$set(e.modifyPass,"newPassword2",t)},expression:"modifyPass.newPassword2"}})],1),n("el-form-item",[n("div",{staticClass:"tac"},[n("el-button",{on:{click:e.hideDiaglog}},[e._v("取消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.modifyPassword}},[e._v("确定")])],1)])],1)],1)},f=[],p=n("a0b5"),w={data:function(){var e=this,t=function(t,n,s){n!=e.modifyPass.newPassword&&s(new Error("两次输入的新密码必须一致")),s()},n=[{required:!0,message:"请输入6-18位密码",trigger:"blur"},{min:6,max:18,message:"密码需要6-18位",trigger:"change"}];return{modifyPass:{oldPassword:null,newPassword:null,newPassword2:null},rules:{oldPassword:n,newPassword:n,newPassword2:[].concat(n,[{validator:t,trigger:"blur"}])}}},computed:{idType:function(){return this.$store.getters.idType}},methods:{modifyPassword:function(){var e=this;this.$refs.modifyPassForm.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=12;break}return t.prev=1,t.next=4,p["a"].setPassword(e.idType,e.modifyPass);case 4:t.sent,e.$message.success("修改密码成功"),e.hideDiaglog(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$message.error(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())},hideDiaglog:function(){this.$emit("hide")}}},h=w,b=Object(d["a"])(h,g,f,!1,null,"1bad2e62",null),x=b.exports,v=(n("bbd5"),n("0c6d")),P=n("5252"),y={components:{navmenu:m,modifyPass:x},data:function(){return{studentList:[{index:"1",title:"我的信息",children:[{index:"/info",title:"我的资料"}]},{index:"",title:"我的证书",children:[{index:"/certificate",title:"现有证书"},{index:"/overdueCertificate",title:"过期证书"},{index:"/cerOperHistory",title:"审核记录"}]},{index:"2",title:"我的培训",children:[{index:"/enrolableTraining",title:"可报名的培训"},{index:"/enrolledTraining",title:"已报名的培训"}]},{index:"3",title:"我的考试",children:[{index:"/examTodo",title:"需要参加的考试"},{index:"/examDone",title:"已完成的考试"}]},{index:"4",title:"我的活动",children:[{index:"/enrolableActivities",title:"可报名活动"},{index:"/enrolledActivities",title:"已报名活动"}]},{index:"5",title:"投票",children:[{index:"/canVote",title:"可参与投票"},{index:"/hasVoted",title:"已参与投票"}]},{index:"/order",title:"我的订单"}],memberList:[{index:"1",title:"我的信息",children:[{index:"/info",title:"我的资料"}]},{index:"2",title:"学员管理",children:[{index:"/management",title:"挂靠关系"}]},{index:"3",title:"培训管理",children:[{index:"/enrolableTraining",title:"可报名的培训"},{index:"/enrolledTraining",title:"已报名的培训"}]},{index:"4",title:"学员证件",children:[{index:"/certificate",title:"管理证件"},{index:"/cerOperHistory",title:"审核记录"}]},{index:"5",title:"活动报名",children:[{index:"/enrolableActivities",title:"可报名活动"},{index:"/enrolledActivities",title:"已报名活动"}]},{index:"6",title:"投票",children:[{index:"/canVote",title:"可参与投票"},{index:"/hasVoted",title:"已参与投票"}]},{index:"/order",title:"我的订单"}],unReadNum:0,defaulUrl:null,dialogFlag:!1}},watch:{"$route.path":function(e){this.defaulUrl=e,"/message"!=e&&this.getMessageNum()}},computed:{name:function(){return this.$store.getters.userName},type:function(){return this.$store.getters.idType}},mounted:function(){this.getMessageNum()},methods:{toHomePage:function(){this.$router.push("/")},handleCommand:function(e){"msg"==e?this.toMessage():"logout"==e?this.logout():"pas"==e&&(this.dialogFlag=!0)},logout:function(){var e=this;try{Object(v["c"])("/campback/logout","get").then((function(t){e.$message.success("注销成功")}))}catch(t){}this.$router.push("/login"),this.$store.commit("removeState")},toMessage:function(){this.$router.push("/message")},getMessageNum:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t=Number(window.localStorage.getItem("msgTime")),n=(new Date).getTime(),!t){e.next=6;break}if(!(n-t<2e3)){e.next=6;break}return e.abrupt("return",!1);case 6:return window.localStorage.setItem("msgTime",n),console.log("更新未读消息"),e.next=10,P["a"].getUnReadMsgNum(this.type);case 10:s=e.sent,this.unReadNum=s.data,e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),this.$message.error(e.t0.message);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}()}},_=y,O=(n("db62"),Object(d["a"])(_,s,i,!1,null,"7059408f",null));t["default"]=O.exports}}]);