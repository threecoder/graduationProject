(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-455bf5db"],{"0852":function(t,e,n){},"14eb":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-col",{staticClass:"mt30",attrs:{span:24}},[n("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},i=[],r={data:function(){return{}},props:["total","pageSize","currentPage"],methods:{handleSizeChange:function(t){},handleCurrentChange:function(t){this.$emit("curChange",t,this.pageSize)}}},s=r,o=(n("c8f4"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"8890b7c4",null);e["a"]=l.exports},3008:function(t,e,n){"use strict";var a=n("a138"),i=n.n(a);i.a},"3e4c":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-drawer",{staticClass:"drawer-container",attrs:{title:"培训详情",visible:t.drawerInfoFlag,size:"30%"},on:{"update:visible":function(e){t.drawerInfoFlag=e}}},[n("div",{staticClass:"tac"},[n("h3",[t._v(t._s(t.drawerInfo.name))]),n("p",[t._v("培训时间："+t._s(t.drawerInfo.date))]),n("p",[t._v("培训地点："+t._s(t.drawerInfo.address))])]),n("div",{staticClass:"divider"}),n("div",{staticClass:"activity-detail"},[t._l(t.drawerInfo.introduction,(function(e,a){return n("p",{key:a},[t._v(t._s(e))])})),n("p",[t._v("如有疑问，请联系："+t._s(t.drawerInfo.contacts))]),n("p",[t._v("联系方式："+t._s(t.drawerInfo.phone))])],2),n("div",{staticClass:"drawer-footer"},[n("el-button",{on:{click:t.notDisplay}},[t._v("取 消")]),t.isEnrolableFlag?n("el-button",{attrs:{type:"primary"},on:{click:t.enroll}},[t._v("立即报名")]):t._e()],1)])],1)},i=[],r={props:{drawerInfo:Object,flag:Boolean,isEnrolable:Boolean},data:function(){return{drawerInfoFlag:this.flag,isEnrolableFlag:this.isEnrolable}},watch:{flag:function(t){this.drawerInfoFlag=t},drawerInfoFlag:function(t){0==t&&this.notDisplay()}},methods:{notDisplay:function(){this.$emit("notDisplay")},enroll:function(){this.$emit("enroll")}}},s=r,o=(n("3008"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"4e30a4d8",null);e["a"]=l.exports},6872:function(t,e,n){"use strict";var a=n("0852"),i=n.n(a);i.a},"73eb":function(t,e,n){"use strict";var a=n("0c6d"),i=n("b441"),r=function(t,e){var n=0==t?i["g"]:i["d"];return n+="/getJoinableTraining",Object(a["c"])(n,"get",e)},s=function(t){return Object(a["c"])(i["g"]+"/joinTraining","post",{trainingId:t})},o=function(t,e){var n=0==t?i["g"]:i["d"];return n+="/getSignedTraining",Object(a["c"])(n,"get",e)},l=function(t){return Object(a["c"])(i["g"]+"/getSeatNum","post",{activityId:t})},c=function(t){return Object(a["c"])(i["d"]+"/joinTraining","post",t)};e["a"]={getJoinableTraining:r,studentJoinTraining:s,getsignedTraining:o,getSeatNum:l,memberJoinTraining:c}},a138:function(t,e,n){},add5:function(t,e,n){"use strict";var a=n("e01e"),i=n.n(a);i.a},b6b0:function(t,e,n){},bcc8:function(t,e,n){"use strict";var a=n("0c6d"),i=n("b441"),r=function(t,e){return 0==t?Object(a["c"])("".concat(i["g"],"/getJoinableActivities"),"get",e):Object(a["c"])("".concat(i["d"],"/getJoinableActivities"),"get",e)},s=function(t){return Object(a["c"])("".concat(i["g"],"/joinActivity"),"post",{activityId:t})},o=function(t,e){return 0==t?Object(a["c"])("".concat(i["g"],"/getSignedActivities"),"get",e):Object(a["c"])("".concat(i["d"],"/getSignedActivities"),"get",e)},l=function(t,e){return 0==t?Object(a["c"])("".concat(i["g"],"/getSeatNum"),"get",{activityId:e}):Object(a["c"])("".concat(i["d"],"/getSeatNum"),"get",{activityId:e})},c=function(){return Object(a["c"])(i["d"]+"/getStudentList","get")},u=function(t){return Object(a["c"])(i["d"]+"/joinActivity","post",t)};e["a"]={getJoinableActivities:r,studentJoinActivties:s,getsignedActivities:o,getSeatNum:l,getList:c,memberJoinActivity:u}},c8f4:function(t,e,n){"use strict";var a=n("b6b0"),i=n.n(a);i.a},d2a2:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",t._g(t._b({directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"tableRef",staticClass:"m-table",attrs:{size:"small",data:t.data,"max-height":t.data?600:200}},"el-table",t.tableAttr,!1),t.tableEvent),[t._l(t.tableConfig,(function(e,a){return[e.slot?t._t(e.slot,null,{params:e,prop:e.prop}):n("el-table-column",t._b({key:a,attrs:{align:"center"}},"el-table-column",e,!1))]}))],2)},i=[],r={name:"m-Table",props:{tableConfig:{type:Array},data:{type:Array},loading:{type:Boolean},tableAttr:{type:Object},tableEvent:{type:Object}}},s=r,o=(n("add5"),n("2877")),l=Object(o["a"])(s,a,i,!1,null,"bcfa35a4",null);e["a"]=l.exports},e01e:function(t,e,n){},fa0b:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"all-container"},[n("m-table",{attrs:{data:t.tableData,tableConfig:t.tableConfig,loading:t.loading,tableEvent:t.tableEvent},scopedSlots:t._u([{key:"select",fn:function(e){var a=e.params;return n("el-table-column",t._b({attrs:{fixed:"",align:"center",type:"selection",width:"55"}},"el-table-column",a,!1))}},{key:"oper",fn:function(e){var a=e.params;return n("el-table-column",t._b({attrs:{fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return n("div",{},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.deleteOneStudent(a)}}},[t._v("解除挂靠")])],1)}}])},"el-table-column",a,!1))}}])})],1)},i=[],r=n("d2a2"),s={components:{mTable:r["a"]},props:["tableData","tableConfig"],data:function(){return{tableEvent:{"selection-change":this.handleSelectionChange},loading:!1}},mounted:function(){},methods:{handleSelectionChange:function(t){this.$emit("selectChange",t)},deleteOneStudent:function(t){this.$emit("dele",t.idNum)}}},o=s,l=n("2877"),c=Object(l["a"])(o,a,i,!1,null,"79cd4e00",null);e["a"]=c.exports},fb34:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h2",[t._v("可报名的培训")]),n("div",{staticClass:"divider"}),n("div",{staticClass:"form-container"},[n("el-form",{attrs:{model:t.form,inline:""}},[n("el-form-item",{attrs:{label:"活动名称"}},[n("el-input",{attrs:{placeholder:"请输入活动名称",clearable:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.init}},[t._v("查询")])],1)],1)],1),n("div",{staticClass:"table-container"},[n("m-table",{attrs:{data:t.trainingTable.tableData,tableConfig:t.trainingTable.tableConfig,loading:t.trainingTable.loading,tableAttr:t.trainingTable.tableAttr},scopedSlots:t._u([{key:"oper",fn:function(e){var a=e.params;return n("el-table-column",t._b({staticClass:"myoper",attrs:{align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return n("div",{},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.checkDetail(a)}}},[t._v("培训详情")]),0==t.idType?n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.studentJoin(a)}}},[t._v("报名")]):t._e(),1==t.idType?n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.studentList.listFlag=!0,t.studentList.id=a.id}}},[t._v("报名")]):t._e()],1)}}])},"el-table-column",a,!1))}}])}),n("page",{attrs:{currentPage:t.form.currentPage,total:t.form.total,pageSize:t.form.pageSize},on:{curChange:t.curChange}})],1),n("training-detail",{attrs:{drawerInfo:t.drawerInfo,flag:t.drawerInfoFlag,isEnrolable:!0},on:{"update:flag":function(e){t.drawerInfoFlag=e},notDisplay:function(e){t.drawerInfoFlag=!1},enroll:t.enroll}}),t.studentList.listFlag?n("el-dialog",{attrs:{title:"选择人员",visible:t.studentList.listFlag,width:"40%"},on:{"update:visible":function(e){return t.$set(t.studentList,"listFlag",e)}}},[n("list",{attrs:{tableConfig:t.studentList.config,tableData:t.studentList.list},on:{selectChange:t.selectChange}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.studentList.listFlag=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.memberJoin}},[t._v("确 定")])],1)],1):t._e()],1)},i=[],r=(n("96cf"),n("3b8d")),s=n("d2a2"),o=n("14eb"),l=n("fa0b"),c=n("3e4c"),u=(n("bbd5"),n("bcc8")),d=n("73eb"),g={components:{mTable:s["a"],page:o["a"],list:l["a"],trainingDetail:c["a"]},data:function(){return{form:{pageSize:10,currentPage:1,total:100,name:""},dialogVisible:!1,trainingTable:{tableConfig:[{prop:"id",label:"培训序号",width:"100"},{prop:"name",label:"培训名称"},{prop:"date",label:"举办时间"},{prop:"address",label:"地点"},{prop:"fee",label:"费用"},{prop:"opera",label:"操作",fixed:"right",width:220,slot:"oper"}],tableData:[],tableAttr:{stripe:!0},loading:!1},drawerInfo:{id:null,name:null,date:null,address:null,fee:null,introduciotn:[],contacts:"唐先生 13535789321"},drawerInfoFlag:!1,joinLoading:!1,studentList:{id:null,listFlag:!1,data:[],config:[{slot:"select"},{prop:"name",label:"姓名"},{prop:"idNum",label:"身份证号码"},{prop:"phone",label:"手机号码"},{prop:"position",label:"职务"}],list:[]}}},watch:{"studentList.listFlag":{handler:function(){this.studentList.data.length=0}}},computed:{idType:function(){return this.$store.getters.idType}},mounted:function(){this.init(),1==this.idType&&this.getStudentList()},methods:{curChange:function(t){this.form.currentPage=t,this.getList()},init:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d["a"].getJoinableTraining(this.idType,this.form);case 3:e=t.sent,this.trainingTable.tableData=e.data.list,this.form.total=e.data.total,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),this.$message.error(t.t0.message),console.log(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),enroll:function(){0==this.idType?this.studentJoin(null):(this.studentList.listFlag=!0,this.studentList.id=this.drawerInfo.id)},studentJoin:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$confirm("确定报名这个培训吗？","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n.joinLoading=!0,a=e?e.id:n.drawerInfo.id,t.next=5,d["a"].studentJoinTraining(a);case 5:t.sent,n.$message.success("报名成功"),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),n.$message.error(t.t0.message);case 12:n.joinLoading=!1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])}))));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getStudentList:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u["a"].getList();case 3:e=t.sent,this.studentList.list=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$message.error(t.t0.message);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),memberJoin:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.studentList.data.length){t.next=3;break}return this.$message.error("报名人数不能为0"),t.abrupt("return",!1);case 3:this.$confirm("确定报名这个培训吗？","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e={idNums:n.studentList.data,trainingId:n.studentList.id},t.next=4,d["a"].memberJoinTraining(e);case 4:a=t.sent,n.$alert(a.msg,"提示"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),n.$alert(t.t0.message,"提示");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkDetail:function(t){this.drawerInfo=t,this.drawerInfoFlag=!0},selectChange:function(t){this.studentList.data=t.map((function(t){return t.idNum}))}}},f=g,p=(n("6872"),n("2877")),b=Object(p["a"])(f,a,i,!1,null,"dbe6ec3c",null);e["default"]=b.exports}}]);